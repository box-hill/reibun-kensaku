(this["webpackJsonpreibun-kensaku"]=this["webpackJsonpreibun-kensaku"]||[]).push([[0],{48:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var c=n(19),s=n.n(c),a=n(42),r=n.n(a),i=n(43),l=n(21),o=n(13),d=(n(48),n(11));var h=function(e){return!0===e.loading?Object(d.jsxs)("div",{className:"spinner",children:[Object(d.jsx)("div",{className:"bounce1"}),Object(d.jsx)("div",{className:"bounce2"}),Object(d.jsx)("div",{className:"bounce3"})]}):null},u=n(30),j=n(35);var b=function(e){function t(e){return Object(d.jsx)("ul",{children:e.examples.map((function(t,n){return Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{children:t.explaination}),Object(d.jsx)("span",{className:"example",onClick:function(){return e.search(t.search)},children:t.search})]},n)}))})}return!0===e.loading?Object(d.jsx)("div",{className:"results-container",children:Object(d.jsx)("div",{id:"loader",children:Object(d.jsx)(h,{loading:e.loading})})}):void 0===e.parsedResults?Object(d.jsxs)("div",{id:"error-center",className:"results-container",children:[Object(d.jsx)("div",{className:"error-emoji",children:"(\u256f\xb0\u25a1\xb0)\u256f\ufe35 \u253b\u2501\u253b"}),Object(d.jsx)("div",{children:"Can't find any matching sentences."}),Object(d.jsx)("div",{children:"Try changing your search."}),Object(d.jsx)("div",{className:"error-jap",children:"\u30d5\u30ec\u30fc\u30ba\u306b\u8a72\u5f53\u3059\u308b\u4f8b\u6587\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002"}),Object(d.jsx)("div",{children:"\u30d5\u30ec\u30fc\u30ba\u3092\u5909\u66f4\u3057\u3066\u691c\u7d22\u3057\u3066\u304f\u3060\u3055\u3044\u3002"})]}):"API key limit reached"===e.parsedResults?Object(d.jsxs)("div",{id:"error-center",className:"results-container",children:[Object(d.jsx)("div",{className:"error-emoji",children:"(\u256f\xb0\u25a1\xb0)\u256f\ufe35 \u253b\u2501\u253b"}),Object(d.jsx)("div",{children:"API Key limit Reached."})]}):0===e.parsedResults.length?Object(d.jsx)("div",{className:"results-container",id:"welcome-container",children:Object(d.jsxs)("article",{children:[Object(d.jsx)("div",{id:"welcome-message",children:"\u4f8b\u6587\u691c\u7d22\u3078\u3088\u3046\u3053\u305d\uff01"}),Object(d.jsxs)("p",{children:["RK is a powerful Japanese sentence searcher. Unlike other traditional websites that use a dictionary API or database search, ",Object(d.jsx)("b",{children:"RK generates sentences from the web"}),"."]}),Object(d.jsxs)("p",{children:["Yes! This means that articles, blogs and even your favourite celebrity's tweet all contribute to the example sentences generated. RK's biggest strength lies in its ability to ",Object(d.jsx)("b",{children:" generate sentences from open ended phrases"}),", a feature not present in other sentence searchers."]}),Object(d.jsx)("p",{children:"Here's a few example searches to give you a taste of what RK can do."}),Object(d.jsx)(t,{search:e.search,examples:[{search:"\u3069\u3046\u3057\u3066\u6d77",explaination:"Common multi-word phrases: "},{search:"\u7f8e\u5473\u3057\u304f\u306a\u304f\u306a\u3044",explaination:"Japanese slang: "},{search:"\u307b\u3093\u307e\u306b\u5206\u304b\u3089\u3093",explaination:"Dialect and slang: "},{search:"\u51e6\u65b9\u305b\u3093\u306a\u3057\u3067\u8cb7\u3048",explaination:"Incomplete verb conjugation: "},{search:"\u30b0\u30e9\u30b9\u306e\u6570\u304c\u8db3\u308a\u306a\u3044",explaination:"Check for correct sentences: "},{search:"\u30ac\u30e9\u30b9\u306e\u6570\u304c\u8db3\u308a\u306a\u3044",explaination:"Incorrect searches yield no results: "}]})]})}):Object(d.jsx)("div",{className:"results-container",children:e.parsedResults.map((function(e,t){if(null!==e.text)return Object(d.jsxs)("div",{className:"card",children:[Object(d.jsxs)("div",{className:"card-text",children:[e.start,Object(d.jsx)("b",{children:e.searchedPhrase}),e.end]}),Object(d.jsxs)("a",{href:e.link,target:"_blank",className:"icon",children:[Object(d.jsx)(u.a,{icon:j.a})," "]})]},t)}))})};var O=function(e){return e.loading?Object(d.jsx)("div",{className:"history",children:Object(d.jsx)("div",{id:"loader",children:Object(d.jsx)(h,{loading:e.loading})})}):null===e.history||void 0===e.history?Object(d.jsx)("div",{className:"history",children:Object(d.jsx)("div",{children:"Try searching something!"})}):0===e.history.length?Object(d.jsxs)("div",{className:"history",children:[Object(d.jsx)("div",{className:"history-heading",children:"Recent searches"}),Object(d.jsx)("div",{className:"history-table"})]}):0!==e.history.length?Object(d.jsxs)("div",{className:"history",children:[Object(d.jsx)("div",{className:"history-heading",children:"Recent searches"}),Object(d.jsx)("div",{className:"history-table",children:e.history.map((function(e,t){return Object(d.jsxs)("div",{className:"history-item",id:"past-search-"+t,children:[Object(d.jsx)("div",{children:e.text}),Object(d.jsxs)("div",{className:"num-results",children:[e.numResultsFormatted," Matches"]})]},t)}))})]}):null},f=n(39),v=Object({NODE_ENV:"production",PUBLIC_URL:"/reibun-kensaku",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_API:"AIzaSyClsHenpG1e5CwZc78z7Kdc4szOkv5Xei4",REACT_APP_FIREBASE_API:"AIzaSyDqKHML7jRE3g3pxva7DHMxVDCZFwm6j14",REACT_APP_FIREBASE_AUTHDOMAIN:"reibun-kensaku.firebaseapp.com",REACT_APP_FIREBASE_PROJECTID:"reibun-kensaku",REACT_APP_FIREBASE_STORAGEBUCKET:"reibun-kensaku.appspot.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"697365377881",REACT_APP_FIREBASE_APPID:"1:697365377881:web:78c42a2d5bde7122f0d248"}),x={apiKey:v.REACT_APP_FIREBASE_API,authDomain:v.REACT_APP_FIREBASE_AUTHDOMAIN,projectId:v.REACT_APP_FIREBASE_PROJECTID,storageBucket:v.REACT_APP_FIREBASE_STORAGEBUCKET,messagingSenderId:v.REACT_APP_FIREBASE_MESSAGINGSENDERID,appId:v.REACT_APP_FIREBASE_APPID};f.a.initializeApp(x);var m=f.a,p=(n(58),n(55),n(40));function g(e){return Object(d.jsx)("nav",{className:"navbar",children:Object(d.jsxs)("ul",{className:"navbar-nav",children:[" ",e.children]})})}function E(e){return e.initialLogin?Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)("button",{herf:"#",className:"nav-button",onClick:e.onClick,children:Object(d.jsxs)("div",{className:"text-button",children:[Object(d.jsx)(u.a,{icon:e.icon}),e.text]})})}):null}function A(e){return Object(d.jsxs)("form",{autoComplete:"off",children:[Object(d.jsx)("input",{type:"text",maxLength:"15",placeholder:"Search a phrase...",required:!0,autoComplete:"false",className:"nav-search-bar",id:"focus",onChange:e.handleChange}),Object(d.jsx)("button",{className:"nav-search-bar-button",onClick:e.search,children:Object(d.jsx)(u.a,{icon:j.b})})]})}var S=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(!1),r=Object(o.a)(a,2),h=r[0],u=r[1],j=Object(c.useState)(""),f=Object(o.a)(j,2),v=f[0],x=f[1],S=Object(c.useState)(!1),R=Object(o.a)(S,2),_=R[0],N=R[1],P=Object(c.useState)([]),I=Object(o.a)(P,2),y=I[0],C=I[1],T=Object(c.useState)([]),k=Object(o.a)(T,2),w=k[0],D=k[1],B=Object(c.useState)(!1),F=Object(o.a)(B,2),K=F[0],H=F[1],G=Object(c.useState)(!0),J=Object(o.a)(G,2),L=J[0],U=J[1];function z(e,t){if(h){var n=m.auth().currentUser.uid,c=(new Date).getTime();m.firestore().collection("users").doc(n).collection("searches").add({text:e,searchedOn:c,numResultsFormatted:t}).catch((function(e){console.error("Error addin doc: ",e)})),M()}else{var s={text:e,numResultsFormatted:t},a=localStorage.getItem("pastSearches");if(null===a)a=[s];else if((a=JSON.parse(a))instanceof Array){var r=(a=[s].concat(Object(l.a)(a))).length;if(r>15)for(var i=15;i<r;i++)a.pop()}else a=[a,s];a=function(e){if(e instanceof Array||null===e)return e;return[e]}(a),D(a),localStorage.setItem("pastSearches",JSON.stringify(a))}}function M(){if(U(!0),h){var e=m.auth().currentUser.uid,t=m.firestore().collection("users").doc(e).collection("searches");t.orderBy("searchedOn","desc").get().then((function(e){var n=[];e.forEach((function(e){var t=e.data();n.push(Object(i.a)({id:e.id},t))})),D(n);var c=[];if(n.length>15){for(var s=15;s<n.length;s++)console.log(n),c.push(n[s].id);console.log("ids to remove: ",c),c.forEach((function(e){t.doc(e).delete()}))}})).catch((function(e){console.log("Error getting documents: ",e)})),console.log("Retrieved Cloud History: ",w)}else{var n=localStorage.getItem("pastSearches");if(null===(n=JSON.parse(n))||void 0===n||null===n[0])return D([]),void U(!1);D(n),console.log("Retrieved Local History: ",n)}U(!1)}function W(e){if("string"!==typeof e){e.preventDefault();if(null===v.match(/[\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/))return void alert("Search does not contain any Japanese!")}if(!_){N(!0),setTimeout((function(){return N(!1)}),1e3),C([]),H(!0);var t="";t="string"===typeof e?e:v.replace(/\s/g,"");var n=0,c="https://www.googleapis.com/customsearch/v1?key=".concat("AIzaSyClsHenpG1e5CwZc78z7Kdc4szOkv5Xei4",'&lr=lang_ja&cx=22519e5637b61b1c8&q="').concat(t,'"');fetch(c,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){if(console.log("search response: ",e),e.error)return H(!1),void C("API key limit reached");if(void 0===e.items)return H(!1),C(void 0),void z(t,"0");C(function(e){function n(e){var n=new RegExp("<b>.*</b>","g"),c=new RegExp("&nbsp;","g"),s=e.replaceAll(n,t);return s=s.replaceAll(c,"\u2026")}var c=[];return e.forEach((function(e){var s="";if(e.htmlSnippet.includes("<b>"))s=n(e.htmlSnippet);else{if(!e.htmlTitle.includes("<b>"))return s=null,void(c=[].concat(Object(l.a)(c),[{text:null}]));s=n(e.htmlTitle)}s=function(e){var t=/(<([^>]+)>)/gi,n=e.replaceAll(t,"");return t=/&.*;/g,n.replaceAll(t,"")}(s=s.replaceAll(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-]\d{2}/g,""));var a=function(e){var n=e.indexOf(t);function c(e,t,n){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3]){var s=0;return t.forEach((function(t){var c=e.indexOf(t)+1;s=c>s&&c<n?c:s})),s}var a=e.length;return t.forEach((function(t){var s=c?e.indexOf(t)+1:e.indexOf(t);a=s<a&&s>n?s:a})),a}var s=c(e,[".",";","\u3002","\u2026","\uff1f","?","|","\uff5c","\uff01","!","\u2192"],n,!0),a=c(e,[";","|","\uff5c","\u2192","\u3010","&"],n,!1),r=c(e,[".","\u3002","\u2026","\uff1f","?","\uff01","!"],n,!1,!0);return a=r<a?r:a,{text:e.slice(s,a),start:e.slice(s,n),searchedPhrase:t,end:e.slice(n+t.length,a)}}(s),r=a.text,i=a.start,o=a.searchedPhrase,d=a.end;c=[].concat(Object(l.a)(c),[{text:r,start:i,searchedPhrase:o,end:d,link:e.link}])})),console.log(c),c}(e.items)),n=e.searchInformation.formattedTotalResults,H(!1),z(t,n)})).catch((function(e){console.log(e)}))}}return Object(c.useEffect)((function(){m.auth().onAuthStateChanged((function(e){e?(u(!0),M()):(u(!1),M()),s(!0)})),document.getElementById("focus").focus()}),[]),Object(c.useEffect)((function(){n&&M()}),[h]),Object(d.jsxs)("div",{className:"app",children:[Object(d.jsxs)(g,{children:[Object(d.jsx)("div",{className:"nav-search",children:Object(d.jsx)(A,{search:W,handleChange:function(e){x(e.target.value)}})}),Object(d.jsx)("div",{className:"nav-items",children:h?Object(d.jsx)(E,{text:"Sign out",icon:p.a,onClick:function(){m.auth().signOut(),M()},initialLogin:n}):Object(d.jsx)(E,{text:"Sign in",icon:p.a,onClick:function(){var e=new m.auth.GoogleAuthProvider;m.auth().signInWithPopup(e).then((function(e){var t=e.user;console.log(t)})).catch(console.log),M()},initialLogin:n})})]}),Object(d.jsx)("div",{className:"flex-center",children:Object(d.jsxs)("div",{className:"main-content",children:[Object(d.jsx)(b,{parsedResults:y,loading:K,search:W}),Object(d.jsx)(O,{loading:L,loggedIn:h,history:w})]})})]})};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.b13707f7.chunk.js.map